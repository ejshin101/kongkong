<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib prefix="kongkong" tagdir="/WEB-INF/tags/kongkong"%>
<html>
<head>
<style>
#sideBar {
	border-style: solid;
	position: absolute;
	top: 400px;
}

#ad {
	border-style: solid;
	position: absolute;
	top: 650px;
	height: 150px;
	width: 150px;
	background-color: aqua;
}
</style>
<%@ include file="/WEB-INF/inc/top.jsp"%>
<title>Home</title>
</head>
<body>
<%@ include file="/WEB-INF/inc/sidebar.jsp"%>
<div class="container">
<div style="height: 100px;"></div>
<!-- START : 검색 폼  --> 
	<div class="row">
		<div class="" align="center">
			############################<br>
			############################<br>
			############################<br>
			############################<br>
			############################<br>
		</div>
	</div>
	<div style="margin: 5px;"></div>
	<form class="row" name="frm_search" action="boardHome.wow" method="post">
			<input type="hidden" name="curPage" value="${searchVO.curPage}">
	        <input type="hidden" name="rowSizePerPage" value="${searchVO.rowSizePerPage}">
		  <div class="col-6" style="float: none; margin:0 auto;">
		    <input type="text" name="searchWord" class="form-control input-sm" value="${searchVO.searchWord}" placeholder="검색어">
		  </div>
		  <div class="col-auto">
		    <button type="submit" class="btn btn-dark mb-1"><i class="fa fa-search"></i></button>
		  </div>
			<div style="margin: 5px;"></div>
			  <div class="col-6" style="float: none; margin:0 auto; ">
			    <select id="id_searchCategory" name="searchCategory" class="form-control input-sm" style="text-align: center;">
	               		<option value="">게시판선택</option>
						<option value="FREE"    <c:if test="${searchVO.searchCategory == 'FREE'}"> selected </c:if>>자유게시판</option>
						<option value="QNA"      <c:if test="${searchVO.searchCategory == 'QNA'}"> selected </c:if>>QNA</option>
						<option value="NOTICE"<c:if test="${searchVO.searchCategory == 'NOTICE'}"> selected </c:if>>공지사항</option>
	            </select>
	            <div style="margin: 5px;"></div>
	            <select id="id_searchType" name="searchType" class="form-control input-sm">
                    <option value="T" ${searchVO.searchType == 'T' ? 'selected="selected"' : '' }>제목</option>
                    <option value="W" ${searchVO.searchType == 'W' ? 'selected="selected"' : '' }>작성자</option>
                    <option value="C" ${searchVO.searchType == 'C' ? 'selected="selected"' : '' }>내용</option>
                </select>
	            전체 ${searchVO.totalRowCount} 건 조회
			  </div>
		  <div class="col-auto">
		    <button type="reset" id="id_btn_reset" class="btn btn-dark"><i class="fa fa-sync"></i></button>
		</div>
	</form>
	<!-- END : 검색 폼  --> 
	<!-- 공지게시판 시작 -->
	<div class="row">
		<div class="col-md-12">
			<table class="table table-hover text-center">
				<colgroup>
					<col width="10%" />
					<col width="10%" />
					<col />
					<col width="10%" />
					<col width="10%" />
					<col width="10%" />
				</colgroup>
				<thead>
					<tr class="table-dark">
						<th>글번호</th>
						<th>분류</th>
						<th>제목</th>
						<th>작성자</th>
						<th>등록일자</th>
						<th>조회수</th>
					</tr>
				</thead>
				<tbody>
					<c:forEach items="${NoticeList}" var="NoticeList" begin="0" end="3">
						<tr class="table-Secondary">
							<td><i class="bi bi-megaphone-fill" style="font-size: x-large;"></i></td>
							<td>${NoticeList.boCategory}</td>
							<td class="text-left"><a
								href="freeView.wow?boNo=${NoticeList.boNo}">
									${NoticeList.boTitle} </a></td>
							<td>${NoticeList.boWriter}</td>
							<td>${NoticeList.boRegDate}</td>
							<td>${NoticeList.boHit}</td>
						</tr>
					</c:forEach>
	<!-- 공지게시판 끝 -->
	<!-- 메인게시판 시작 -->
				<c:forEach items="${freeBoardList}" var="freeBoard">
					<tr class="text-center">
						<td>${freeBoard.boNo}</td>
						<td>${freeBoard.boCategory}</td>
						<td class="text-left">
							<a href="freeView.wow?boNo=${freeBoard.boNo}">
								${freeBoard.boTitle}
							</a>
						</td>
						<td>${freeBoard.boWriter}</td>
						<td>${freeBoard.boRegDate}</td>
						<td>${freeBoard.boHit}</td>
					</tr>
					</c:forEach>
				</tbody>
			</table>
		</div>
	</div>
	<!-- 메인게시판 끝 -->
	<kongkong:paging pagingVO="${searchVO}"/> 
	<!-- 새글쓰기 시작 -->
	<c:if test="${not empty sessionScope.USER_INFO}">
	<div class="container" style="margin-top: 50px">
		<div class="text-right">
			 <a href="freeRegist.wow" class="btn btn-primary btn-sm" style="margin-top: 30px">
			 	<span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> 
			 	<i class="fa fa-sign"></i> &nbsp;&nbsp;새글쓰기
			 </a>
		 </div>
	  </div>
	  </c:if>
	  <!-- 새글쓰기 끝 -->
</div><!-- 컨테이너 끝 -->
<div id="bottom"></div>
<%@ include file="/WEB-INF/inc/footer.jsp"%>
</body>
<script type="text/javascript">
	// ---전역 변수 설정
	//자바스크립트객체하고 jQuery 객체하고 구분하기 위한  jQuery 객체변수는 $로 시작
	$frm = $('form[name=frm_search]');

	// ---일반 함수 설정

	// ---이벤트 함수 설정

	// $frm 서브밋 이벤트가 발생할 때
	// curPage = 1
	$('button[type=submit]', $frm).click(function(e) {
		e.preventDefault();
		$frm.find("input[name=curPage]").val(1);
		$frm.submit();
	});

	//id_btn_reset 클릭 할 때
	//curPage = 1
	//모든 객체는 초기화 해주시면 됩니다.

	//페이지네이션의 a 링크 클릭

		$('nav ul.pagination a[data-page]').click(function(e){
	 e.preventDefault();
	 $this = $(this);
	 $frm.find("input[name=curPage]").val($this.data('page'));
	 $frm.submit();
	 });

	//로우 사이즈 변경
	$('#id_rowSizePerPage').change(function(e) {
		e.preventDefault();
		$this = $(this);
		console.log('select val', $this.val());
		$frm.find("input[name=curPage]").val(1);
		$frm.find("input[name=rowSizePerPage]").val($this.val());
		$frm.submit();

	});
	// --- 초기화 호출
	$('#id_btn_reset').click(
			function(e) {
				e.preventDefault();
				$frm.find("input[name=curPage]").val(1);
				$frm.find("input[name=searchWord]").val("");
				$frm.find("select[name=searchType]").val("T");
				$frm.find("select[name=searchCategory] option:first").prop("selected", true);
			});
</script>
</html>
