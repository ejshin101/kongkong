<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">

<title>Insert title here</title>
</head>
<body>
<table class="table text-center">
				<thead>
					<tr>
						<th>아이디</th>
						<th>글 번호</th>
						<th>신고 게시글</th>
						<th>신고 날짜</th>
						<th>블락 날짜</th>
						<th>블락취소 및 글 삭제</th>
						<th>안내 메일 전송</th>
					</tr>
				</thead>
				<tbody>
				<c:forEach items="${blockInfo}" var="blockInfo" varStatus="st">
					<tr class="blocklist">
						<td>${blockInfo.boId}</td>
						<td>${blockInfo.boNo}</td>
						<td hidden="">${blockInfo.boBlockMail}</td>
						<td><a href="<%=request.getContextPath()%>/free/freeView.wow?boNo=${blockInfo.boNo}">${blockInfo.boTitle}</a></td>
						<td>${blockInfo.boSingoDate}</td>
						<td>${blockInfo.boBlockDate}</td>
						<td><a href="blockBack.wow?boNo=${blockInfo.boNo}" style="margin-right: 10px;" class="kongkongsRed-sm">블락 취소</a><a href="blockDelete.wow?boNo=${blockInfo.boNo}" class="kongkongsYellow-sm">글 삭제</a></td>
						<td><button onclick="fn_email('${blockInfo.boBlockMail}','${blockInfo.boNo}')" id="memMail" style="margin-right: 10px;" class="kongkongs-sm">메일전송</button></td>
					</tr>
					</c:forEach>
				</tbody>
			</table> 
</body><!-- end.container -->


<script type="text/javascript">

	
function fn_email(a,b) {
	//ajax 의 url을 spring Controller의 RequstMapping("") 으로 요청
	
	var url = '<c:url value="/email/sendSingoEmail.wow"/>';
	
	$.ajax({
		url: url,		
		data : {"memMail" : a, "memId" : b},		
		type : "POST",
		success: function(data){ 
			console.log(data);
		 swal("메일전송이 완료되었습니다.","","success");
		},
		error: function(request, status, error){
			
		}
	}); //ajax 

}
</script>
</html>